# CSU-Library-Seats

**中南大学图书馆自动抢座插件**

**觉得好用就给个star哦🤩**

## 插件特色

1. 在无人值守下自动刷新页面，寻找空闲座位并自动预约；
2. 可自定义刷新时间，优先预约的座位以及即使空闲也不预约的座位；
3. 支持延时预约，即到了用户设定的时间后再开始寻找座位；
4. 经测试预约成功率极高，理论上可以达到100%；
5. 支持电脑端与手机端。

## 电脑端使用前准备

1. 在浏览器中安装 [```Tampermonkey```](https://www.tampermonkey.net/)；
2. 添加新脚本——将 ```PC.js``` 整个复制进去—— ```Ctrl+S``` 保存——重启浏览器；
3. 进入图书馆预约网页 http://libzw.csu.edu.cn/home/web/f_second ，登录后进入某层楼的某个区，即可看到增加的选座按钮。

## 手机端使用前准备

1. 安装能运行 ```Tampermonkey``` 的浏览器（推荐[```iceraven-browser```](https://github.com/fork-maintainers/iceraven-browser)）；
2. 在手机浏览器中安装 [```Tampermonkey```](https://www.tampermonkey.net/)；
3. 管理面板——添加新脚本——将 ```Phone.js``` 整个复制进去——文件——保存——重启浏览器；
4. 进入图书馆预约网页 http://libzw.csu.edu.cn/home/web/f_second ，登录后进入某层楼的某个区，即可看到增加的选座按钮。
5. **手机端删除了延时抢座功能和优先预约座位的功能**。

## 使用方法

### 注意事项

1. 由于预约网页的设计，未登录的用户仍然可以进入选座页面，但是不能预约成功。因此脚本设定只有当**用户登录**后进入选座页面时才显示```自动抢座```的系列按钮。
2. 仅支持在一个**区**内进行选座，例如 ```七楼西区``` ，在总楼层以及单楼层的所有区的页面不会显示 ```自动抢座``` 的系列按钮。

### 默认抢座模式

进入图书馆预约系统的某层楼的某个区后，点击屏幕左侧的 ```默认抢座``` 的绿色按钮即可进行默认配置的抢座（刷新时间1秒、无优先座位与禁止座位）。

### 自由抢座模式

进入图书馆预约系统的某层楼的某个区后，点击屏幕左侧的 ```自由抢座``` 的黄色按钮即可进行自定义配置的抢座。

1. 在上方的弹出框内输入刷新间隔时间，最短为 ```1``` 秒。
2. 进入到自定义座位模式⇒

   1. 每个座位上有一个框可进行点击，含义如下：
      1. 将座位点击一下变蓝色⇒即使该座位空闲也不预约该座位
      2. 将座位再点击一下变绿色⇒如果该座位与其他座位同时空闲，优先预约该座位
      3. 再点击一下回归初始状态（可继续点击变蓝）
   
   2. 同时可以使用鼠标进行刷选，左侧 ```自由抢座``` 按钮被 ```刷选模式``` 选项替代，可选择刷选选项，有效节省点击工作量
   3. 右侧 ```清空``` 按钮将所有座位回归初始状态。
   
3. 点击右侧 ```确定``` 按钮确定自定义的座位。

### 延时设置

进入图书馆预约系统的某层楼的某个区后，点击屏幕左侧的时间的蓝色按钮即可选择开始寻找座位的时间。设定好时间后再点击 ```默认抢座``` 或 ```自由抢座``` 按钮开始选座。

延时设置注意事项：

1. ```Internet Explorer``` 或 ```Firefox``` 不支持该 ```Html5``` 时间按钮。
2. 延时不可以跨天设置。
3. 延时会有一定的误差，建议设置前首先刷新页面减小误差。

## 碎碎念

原来只是针对手速太慢抢不到座位的情况简单写了一下，在室友的支持下越写越多😂，从 ```0.1``` 版本终于迭代到了功能较完善的 ```1.0``` 版本。感谢三位室友的测试反馈！

目前的 ```1.0``` 版本未经过充分测试，有问题可提 ```Issues```，也欢迎感兴趣的同学一起来完善😁

- 2021.06.09  写出 ```1.1``` 版本啦！感谢李俊达同学抛砖引玉，增加了非常实用的刷选功能！（仅电脑端）
